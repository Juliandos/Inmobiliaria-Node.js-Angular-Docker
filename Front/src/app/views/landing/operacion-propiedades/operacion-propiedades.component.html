<!-- Header -->
<div class="page-header">
  <div class="container">
    <h1>{{ operacion?.nombre || 'Cargando...' }}</h1>
    <p>Propiedades disponibles para {{ operacion?.nombre?.toLowerCase() || 'esta operación' }}</p>
  </div>
</div>

<!-- Loading -->
<div *ngIf="loading" class="loading-section">
  <mat-icon class="spin">refresh</mat-icon>
  <p>Cargando propiedades...</p>
</div>

<!-- Propiedades Grid -->
<div *ngIf="!loading" class="propiedades-section">
  <div class="container">
    <!-- Mensaje de filtros activos -->
    <div *ngIf="propiedadesFiltradas.length !== propiedades.length && propiedadesFiltradas.length > 0" class="filter-info">
      <mat-icon>filter_list</mat-icon>
      <span>Mostrando {{ propiedadesFiltradas.length }} de {{ propiedades.length }} propiedades</span>
    </div>

    <div class="propiedades-grid" *ngIf="propiedadesFiltradas.length > 0">
      <app-property-card 
        *ngFor="let propiedad of propiedadesFiltradas; trackBy: trackByPropiedadId" 
        [propiedad]="propiedad">
      </app-property-card>
    </div>

    <!-- No hay propiedades después del filtro -->
    <div *ngIf="propiedadesFiltradas.length === 0 && propiedades.length > 0" class="no-propiedades">
      <mat-icon>search_off</mat-icon>
      <h3>No se encontraron propiedades</h3>
      <p>No hay propiedades que coincidan con los filtros de búsqueda para {{ operacion?.nombre?.toLowerCase() || 'esta operación' }}</p>
      <button mat-raised-button color="primary" (click)="searchService.clearSearch()" class="mt-3">
        <mat-icon class="me-2">clear</mat-icon>
        Limpiar filtros
      </button>
    </div>

    <!-- No hay propiedades en absoluto -->
    <div *ngIf="propiedades.length === 0" class="no-propiedades">
      <mat-icon>home_work</mat-icon>
      <h3>No hay propiedades disponibles</h3>
      <p>Pronto tendremos nuevas propiedades para {{ operacion?.nombre?.toLowerCase() || 'esta operación' }}</p>
      <button mat-raised-button color="primary" routerLink="/landing/propiedades" class="mt-3">
        <mat-icon class="me-2">arrow_back</mat-icon>
        Ver todas las propiedades
      </button>
    </div>
  </div>
</div>

