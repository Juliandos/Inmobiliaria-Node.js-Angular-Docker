<header class="landing-header" [class.scrolled]="isScrolled" [class.at-top]="!isScrolled">
  <div class="header-content">
    <!-- Logo - Left -->
    <div class="logo-container">
      <a routerLink="/landing/home" class="logo-link">
        <img 
          src="assets/logo IHO.jpg" 
          alt="VENTAS HAMILTON ORTEGA inmobiliaria"
          class="logo-image">
      </a>
    </div>

    <!-- Mobile Menu Toggle -->
    <button 
      mat-icon-button 
      class="mobile-menu-toggle"
      (click)="toggleMobileMenu()"
      aria-label="Menú móvil">
      <mat-icon>{{ mobileMenuOpen ? 'close' : 'menu' }}</mat-icon>
    </button>

    <!-- Navigation Menu - Center -->
    <nav class="header-nav" [class.mobile-open]="mobileMenuOpen">
      <!-- Botón desplegable de Operaciones -->
      <div class="nav-dropdown">
        <button 
          mat-button 
          [matMenuTriggerFor]="operacionesMenu"
          class="nav-link dropdown-trigger"
          [disabled]="loadingOperaciones || operacionesMenuItems.length === 0">
          <span>Operaciones</span>
          <mat-icon class="dropdown-icon">arrow_drop_down</mat-icon>
        </button>
        <mat-menu #operacionesMenu="matMenu" class="operaciones-menu">
          <button 
            mat-menu-item 
            *ngFor="let operacionItem of operacionesMenuItems"
            (click)="navigateToOperacion(operacionItem.route)">
            <mat-icon>business_center</mat-icon>
            <span>{{ operacionItem.label }}</span>
          </button>
        </mat-menu>
      </div>
      
      <!-- Links estáticos -->
      <a 
        *ngFor="let item of menuItems" 
        [routerLink]="item.route"
        [queryParams]="item.queryParams"
        class="nav-link"
        (click)="closeMobileMenu()">
        {{ item.label }}
      </a>
    </nav>

    <!-- Right Section: Search + User Menu -->
    <div class="header-right">
      <!-- Search Input -->
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Buscar</mat-label>
        <input 
          matInput 
          [formControl]="searchControl"
          (keyup.enter)="onSearch()"
          placeholder="Buscar...">
        <mat-icon matSuffix (click)="onSearch()" class="search-icon">search</mat-icon>
      </mat-form-field>

      <!-- User Menu Button -->
      <button 
        mat-icon-button 
        [matMenuTriggerFor]="userMenu"
        class="user-menu-button"
        aria-label="Menú de usuario">
        <mat-icon>account_circle</mat-icon>
      </button>

      <!-- User Dropdown Menu -->
      <mat-menu #userMenu="matMenu" class="user-menu">
        <button mat-menu-item routerLink="/login" *ngIf="!isLoggedIn">
          <mat-icon>login</mat-icon>
          <span>Iniciar Sesión</span>
        </button>
        <button mat-menu-item *ngIf="isLoggedIn">
          <mat-icon>logout</mat-icon>
          <span>Cerrar Sesión</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item>
          <mat-icon>brightness_4</mat-icon>
          <span>Tema Claro</span>
        </button>
        <button mat-menu-item>
          <mat-icon>brightness_2</mat-icon>
          <span>Tema Oscuro</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item routerLink="/dashboard" *ngIf="isLoggedIn">
          <mat-icon>dashboard</mat-icon>
          <span>Dashboard</span>
        </button>
      </mat-menu>
    </div>
  </div>
</header>

